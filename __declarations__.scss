// @fileOverview ./__declarations__.scss  
// @description  
// Declarative CSS à la (https://www.researchgate.net/publication/279039852_A_CSS_integration_model_for_declarative_3D).


// @TODO Color palettes.
$defaultActionBg: #777;


// @TODO Operation spaces.
$operation: 'cancel';


// @bemClass .field--input  
// @description  
// 1. role
// 2. rel
// 3. `operation`

$fieldInput: (
  role: (
    (
      outline: 1px solid gold,
    )
  ),
  rel: (
    (
      background: limegreen,
      color: #fff,
    )
  ),
  #{$operation}: (
    (
      color: red,
    )
  ),
);


// @bemClass .panel (implied)  
// @description  
// Triple column stage.

$panel: (
  member: (
    width: 33%,
  ),
);


// @cssdoc mixin  
// @name If  
// @description  
// Declarative lest conditional.

@mixin If ($type: "div") {
  #{$type} {
    @include __component__(
      $operation  : $operation,
      $components : $fieldInput
    ) {
      background: $defaultActionBg;
    }
  }
}


// @cssdoc mixin  
// @name Once  
// @description  
// Stuff you'd like to do once.

@mixin Once ($event: "anchor", $collection: ()) {
  @each $k, $p in $collection {
    &:#{$k} {
      @each $j, $l in $p {
        #{$j}: #{$l}
      }
    }
  }
}


// @cssdoc mixin  
// @name Spread  
// @description  
// Spreads are typically for columnar setups, but you can easily set up grid 
// logic if you need.  
// @TODO Constraint-based Classes; e.g. Class() { Spread() {} /* @extend .__column__ by Class? */ }

@mixin Spread($event: "__column__") {
  & {
    display: flex;

    @each $prop, $val in $panel {
      .#{$event} {
        @each $p, $v in $val {
          #{$prop} {
            $p: $v;
          }
        }
        @content;
      }
    }
  }
}


// @cssdoc mixin  
// @name With  
// @description  
// Haha, we implemented a JS bug.

@mixin With($layer: ()) {
  @each $i, $k in $layer {
    & {
      #{$i}: $k;
    }
  }

  @content;
}


// @cssdoc mixin  
// @name Schema  
// @description  
// ¯\(°_o)/¯ 

@mixin Schema ($name: "") {

  $smResp: "#{$name}--sm";
  $mdResp: "#{$name}--md";
  $reResp: "#{$name}--retina";
  $prResp: "#{$name}--print";

  %#{$name} {
    @media (min-width: 801px) {
      %#{$smResp} {
        @content;
      }
    }
    @media (min-width: 992px) {
      %#{$mdResp} {
        @content;
      }
    }
    @media
      only screen and (-webkit-min-device-pixel-ratio: 2),
      only screen and (min--moz-device-pixel-ratio: 2),
      only screen and (-o-min-device-pixel-ratio: 2/1),
      only screen and (min-device-pixel-ratio: 2),
      only screen and (min-resolution: 192dpi),
      only screen and (min-resolution: 2dppx) {
      %#{$reResp} {
        @content;
      }
    }
    @media only print {
      %#{$prResp} {
        @content
      }
    }
  }
}


// @cssdoc mixin  
// @name Responses  
// @description  
// Optionally same extenders.

@mixin Responses ($collection: ()) {
  @each $el in $collection {
    & {
      @extend %#{$el};
    }
  }
  @content;
}


